<!DOCTYPE html>

<html>

<head>
    <meta charset="UTF-8">
    <title>Bank2Contract Deploy on NODE2 (PrivateFor NODE1, NODE6)</title>
    <style>
        pre {
            background: #E0F2F7;
        }
    </style>
</head>

<body translate="no">

<h4>log : </h4>
<pre id="log"></pre>

<script src='web3.min.js'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js'></script>

<script>
    function log(input) {
        if (typeof input === 'object')
            $('#log').text($('#log').text() + JSON.stringify(input, null, 2) + '\n')
        else
            $('#log').text($('#log').text() + input + '\n')
    }

    $(function() {

        var web3 = new Web3(new Web3.providers.HttpProvider('http://localhost:22004'))
        var eth = web3.eth;


        var key_Bank1 = "BULeR8JyUWhiuuCMU/HLA0Q5pzkYT+cHII3ZKBey3Bo="
        var key_Bank2 = "QfeDAys9MPDs2XHExtc84jKGHxZg/aj52DTh0vtA3Xc="
        var key_Bank3 = "1iTZde/ndBHvzhcl7V68x44Vx7pl8nwx9LqnM/AfJUg="
        var key_Bank4 = "oNspPPgszVUFw0qmGFfWwh1uxVUXgvBxleXORHj07g8="
        var key_Bank5 = "R56gy4dn24YOjwyesTczYa8m5xhP6hF2uTMCju/1xkY="
        var key_Bank6 = "UfNSeSGySeKg11DVNEnqrUtxYRVor4+CvluI8tVv62Y="
        var key_Bank7 = "ROAZBWtSacxXQrOe3FGAqJDyJjFePR5ce4TSIzmJ0Bc="

        var _bank_id = "Bank5";
        var _bank_name = "第五銀行";
        var _bank_admin = "0x0638e1574728b6d862dd5d3a3e0942c3be47d996";

        //var _brokerAccount = "0x20304b28001a5484e34bbbf7e04ef94439149826"; /* var of type address here */ ;
        var bankContract = web3.eth.contract(
            [{"constant":true,"inputs":[{"name":"_customer_id","type":"bytes32"}],"name":"getCustomerTotalInterest","outputs":[{"name":"","type":"int256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_is_true","type":"bool"}],"name":"setOwnedNode","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_securities_id","type":"bytes32"},{"name":"_customer_id","type":"bytes32"},{"name":"_interest","type":"int256"}],"name":"setCustomerSecuritiesInterest","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_securities_id","type":"bytes32"},{"name":"_customer_id","type":"bytes32"}],"name":"getCustomerSecuritiesInterest","outputs":[{"name":"","type":"int256"},{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getCustomerListLength","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_securities_id","type":"bytes32"},{"name":"_customer_id","type":"bytes32"}],"name":"getLastPaidInterest","outputs":[{"name":"","type":"int256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_customer_id","type":"bytes32"},{"name":"_customer_name","type":"string"},{"name":"_customer_type","type":"string"}],"name":"setCustomerInfo","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"checkOwnedNode","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_customer_id","type":"bytes32"}],"name":"getCustomerInfo","outputs":[{"name":"","type":"string"},{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"index","type":"uint256"}],"name":"getCustomerList","outputs":[{"name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[{"name":"_bank_id","type":"bytes32"},{"name":"_bank_admin","type":"address"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"name":"_bank_id","type":"bytes32"},{"indexed":false,"name":"_customer_id","type":"bytes32"}],"name":"EventForSetCustomerInfo","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"_securities_id","type":"bytes32"},{"indexed":false,"name":"_bank_id","type":"bytes32"},{"indexed":false,"name":"_customer_id","type":"bytes32"},{"indexed":false,"name":"_customer_interest","type":"int256"},{"indexed":false,"name":"_timestamp","type":"uint256"}],"name":"EventForSetCustomerSecuritiesInterest","type":"event"}]
        );
        var bank = bankContract.new(_bank_id,  _bank_admin,
            {
                from: _bank_admin,
                data: '0x60606040526000600460006101000a81548160ff021916908315150217905550341561002a57600080fd5b604051604080610f6883398101604052808051906020019091908051906020019091905050336000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550816001816000191690555080600260006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506001600460006101000a81548160ff0219169083151502179055505050610e61806101076000396000f3006060604052600436106100a3576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff168062662804146100a857806328324c17146100e35780632cffe66d146101085780633962769614610145578063406a23d4146101945780635f9c9e60146101bd578063a04fd2e514610205578063bc3b6a4d146102b2578063c6f8b1b0146102df578063ec454274146103eb575b600080fd5b34156100b357600080fd5b6100cd60048080356000191690602001909190505061042a565b6040518082815260200191505060405180910390f35b34156100ee57600080fd5b61010660048080351515906020019091905050610475565b005b341561011357600080fd5b610143600480803560001916906020019091908035600019169060200190919080359060200190919050506104ed565b005b341561015057600080fd5b6101776004808035600019169060200190919080356000191690602001909190505061083d565b604051808381526020018281526020019250505060405180910390f35b341561019f57600080fd5b6101a76108ea565b6040518082815260200191505060405180910390f35b34156101c857600080fd5b6101ef600480803560001916906020019091908035600019169060200190919050506108f4565b6040518082815260200191505060405180910390f35b341561021057600080fd5b6102b060048080356000191690602001909190803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509190803590602001908201803590602001908080601f01602080910402602001604051908101604052809392919081815260200183838082843782019150505050505091905050610959565b005b34156102bd57600080fd5b6102c5610b1e565b604051808215151515815260200191505060405180910390f35b34156102ea57600080fd5b610304600480803560001916906020019091905050610b35565b604051808060200180602001838103835285818151815260200191508051906020019080838360005b8381101561034857808201518184015260208101905061032d565b50505050905090810190601f1680156103755780820380516001836020036101000a031916815260200191505b50838103825284818151815260200191508051906020019080838360005b838110156103ae578082015181840152602081019050610393565b50505050905090810190601f1680156103db5780820380516001836020036101000a031916815260200191505b5094505050505060405180910390f35b34156103f657600080fd5b61040c6004808035906020019091905050610d04565b60405180826000191660001916815260200191505060405180910390f35b6000600460009054906101000a900460ff16151561044b5760009050610470565b6005600201600083600019166000191681526020019081526020016000206000015490505b919050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156104d057600080fd5b80600460006101000a81548160ff02191690831515021790555050565b600460009054906101000a900460ff16156108385760056001016000836000191660001916815260200190815260200160002060009054906101000a900460ff1615156105b0576005600001805480600101828161054b9190610d2b565b916000526020600020900160008490919091509060001916905550600360008154809291906001019190505550600160056001016000846000191660001916815260200190815260200160002060006101000a81548160ff0219169083151502179055505b6005600201600083600019166000191681526020019081526020016000206003016000846000191660001916815260200190815260200160002060009054906101000a900460ff1615156106d15760056002016000836000191660001916815260200190815260200160002060010180548060010182816106319190610d2b565b9160005260206000209001600085909190915090600019169055506005600201600083600019166000191681526020019081526020016000206002016000815480929190600101919050555060016005600201600084600019166000191681526020019081526020016000206003016000856000191660001916815260200190815260200160002060006101000a81548160ff0219169083151502179055505b80600560020160008460001916600019168152602001908152602001600020600401600085600019166000191681526020019081526020016000206000828254019250508190555080600560020160008460001916600019168152602001908152602001600020600501600085600019166000191681526020019081526020016000208190555042600560020160008460001916600019168152602001908152602001600020600601600085600019166000191681526020019081526020016000208190555080600560020160008460001916600019168152602001908152602001600020600001600082825401925050819055507f1b64ad4458fc48a776166f2988ae5cc18c9a817719490d2677e503d951e62d8c83600154848442604051808660001916600019168152602001856000191660001916815260200184600019166000191681526020018381526020018281526020019550505050505060405180910390a15b505050565b600080600460009054906101000a900460ff16151561086857600080819150809050915091506108e3565b60056002016000846000191660001916815260200190815260200160002060040160008560001916600019168152602001908152602001600020546005600201600085600019166000191681526020019081526020016000206006016000866000191660001916815260200190815260200160002054915091505b9250929050565b6000600354905090565b6000600460009054906101000a900460ff1615156109155760009050610953565b600560020160008360001916600019168152602001908152602001600020600501600084600019166000191681526020019081526020016000205490505b92915050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156109b457600080fd5b60056001016000846000191660001916815260200190815260200160002060009054906101000a900460ff161515610a6257600560000180548060010182816109fd9190610d2b565b916000526020600020900160008590919091509060001916905550600360008154809291906001019190505550600160056001016000856000191660001916815260200190815260200160002060006101000a81548160ff0219169083151502179055505b816005600301600085600019166000191681526020019081526020016000209080519060200190610a94929190610d57565b50806005600401600085600019166000191681526020019081526020016000209080519060200190610ac7929190610d57565b507fa63d99c458bb8af054929fdcec5859e82ad47acd77667a3c506d248d6e189e476001548460405180836000191660001916815260200182600019166000191681526020019250505060405180910390a1505050565b6000600460009054906101000a900460ff16905090565b610b3d610dd7565b610b45610dd7565b600460009054906101000a900460ff161515610b86576020604051908101604052806000815250602060405190810160405280600081525091509150610cff565b600560030160008460001916600019168152602001908152602001600020600560040160008560001916600019168152602001908152602001600020818054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610c575780601f10610c2c57610100808354040283529160200191610c57565b820191906000526020600020905b815481529060010190602001808311610c3a57829003601f168201915b50505050509150808054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610cf35780601f10610cc857610100808354040283529160200191610cf3565b820191906000526020600020905b815481529060010190602001808311610cd657829003601f168201915b50505050509050915091505b915091565b6000600560000182815481101515610d1857fe5b9060005260206000209001549050919050565b815481835581811511610d5257818360005260206000209182019101610d519190610deb565b5b505050565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10610d9857805160ff1916838001178555610dc6565b82800160010185558215610dc6579182015b82811115610dc5578251825591602001919060010190610daa565b5b509050610dd39190610e10565b5090565b602060405190810160405280600081525090565b610e0d91905b80821115610e09576000816000905550600101610df1565b5090565b90565b610e3291905b80821115610e2e576000816000905550600101610e16565b5090565b905600a165627a7a72305820277a891cecb90a30588918622ff533abd1cb4884b211ebc829407402bbfa84690029',
                gas: '7000000',
                privateFor: [
                    key_Bank1
                ]

            },
            function(e, contract) {

                if (typeof contract.address !== 'undefined') {
                    log('Contract mined! address: ' + contract.address + ' transactionHash: ' + contract.transactionHash)
               }
            })

    })


</script>
</body>

</html>
